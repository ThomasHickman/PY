{
    "downsampling": {},
    "summary": "Apply a score cutoff to filter variants based on a recalibration table",
    "refwindow": {},
    "description": "\n\n <p>\n This tool performs the second pass in a two-stage process called VQSR; the first pass is performed by the\n <a href='https://www.broadinstitute.org/gatk/guide/tooldocs/org_broadinstitute_gatk_tools_walkers_variantrecalibration_VariantRecalibrator.php'>VariantRecalibrator</a> tool.\n In brief, the first pass consists of creating a Gaussian mixture model by looking at the distribution of annotation\n values over a high quality subset of the input call set, and then scoring all input variants according to the model.\n The second pass consists of filtering variants based on score cutoffs identified in the first pass.\n</p>\n\n <p>\n Using the tranche file and recalibration table generated by the previous step, the ApplyRecalibration tool looks at each variant's VQSLOD value\n and decides which tranche it falls in. Variants in tranches that fall below the specified truth sensitivity filter level\n have their FILTER field annotated with the corresponding tranche level. This will result in a call set that is filtered\n to the desired level but retains the information necessary to increase sensitivity if needed.</p>\n\n <p>To be clear, please note that by \"filtered\", we mean that variants failing the requested tranche cutoff are <b>marked\n as filtered</b> in the output VCF; they are <b>not discarded</b>.</p>\n\n <p>VQSR is probably the hardest part of the Best Practices to get right, so be sure to read the\n <a href='https://www.broadinstitute.org/gatk/guide/article?id=39'>method documentation</a>,\n <a href='https://www.broadinstitute.org/gatk/guide/article?id=1259'>parameter recommendations</a> and\n <a href='https://www.broadinstitute.org/gatk/guide/article?id=2805'>tutorial</a> to really understand what these\n tools and how to use them for best results on your own data.</p>\n\n <h3>Input</h3>\n <ul>\n <li>The raw input variants to be filtered.</li>\n <li>The recalibration table file that was generated by the VariantRecalibrator tool.</li>\n <li>The tranches file that was generated by the VariantRecalibrator tool.</li>\n </ul>\n\n <h3>Output</h3>\n <ul>\n <li>A recalibrated VCF file in which each variant of the requested type is annotated with its VQSLOD and marked as filtered if the score is below the desired quality level.</li>\n </ul>\n\n <h3>Usage example for filtering SNPs</h3>\n <pre>\n java -Xmx3g -jar GenomeAnalysisTK.jar \\\n   -T ApplyRecalibration \\\n   -R reference.fasta \\\n   -input NA12878.HiSeq.WGS.bwa.cleaned.raw.subset.b37.vcf \\\n   --ts_filter_level 99.0 \\\n   -tranchesFile path/to/output.tranches \\\n   -recalFile path/to/output.recal \\\n   -mode SNP \\\n   -o path/to/output.recalibrated.filtered.vcf\n </pre>\n\n <h3>Caveats</h3>\n\n <ul>\n <li>The tranche values used in the example above is only a general example. You should determine the level of sensitivity\n that is appropriate for your specific project. Remember that higher sensitivity (more power to detect variants, yay!) comes\n at the cost of specificity (more false negatives, boo!). You have to choose at what point you want to set the tradeoff.</li>\n <li>In order to create the tranche reporting plots (which are only generated for SNPs, not indels!) Rscript needs to be\n in your environment PATH (this is the scripting version of R, not the interactive version).\n See <a target=\"r-project\" href=\"http://www.r-project.org\">http://www.r-project.org</a> for more info on how to download and install R.</li>\n </ul>",
    "group": "Variant Discovery Tools",
    "name": "ApplyRecalibration",
    "annotinfo": "",
    "walkertype": "LocusWalker",
    "annotfield": "",
    "parallel": [
        {
            "name": "TreeReducible",
            "arg": "-nt",
            "link": "http://www.broadinstitute.org/gatk/guide/tooldocs/org_broadinstitute_gatk_engine_CommandLineGATK.php#-nt"
        }
    ],
    "arguments": [
        {
            "required": "no",
            "summary": "Don't output filtered loci after applying the recalibration",
            "synonyms": "-ef",
            "maxValue": "NA",
            "fulltext": "",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "optional_flag",
            "type": "boolean",
            "minRecValue": "NA",
            "name": "--excludeFiltered",
            "rodTypes": "NA",
            "minValue": "NA",
            "options": []
        },
        {
            "required": "no",
            "summary": "If specified, the variant recalibrator will ignore all input filters. Useful to rerun the VQSR from a filtered output file.",
            "synonyms": "-ignoreAllFilters",
            "maxValue": "NA",
            "fulltext": "",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "optional_flag",
            "type": "boolean",
            "minRecValue": "NA",
            "name": "--ignore_all_filters",
            "rodTypes": "NA",
            "minValue": "NA",
            "options": []
        },
        {
            "required": "no",
            "summary": "If specified, the recalibration will be applied to variants marked as filtered by the specified filter name in the input VCF file",
            "synonyms": "-ignoreFilter",
            "maxValue": "NA",
            "fulltext": "For this to work properly, the -ignoreFilter argument should also be applied to the VariantRecalibration command.",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "optional_param",
            "type": "String[]",
            "minRecValue": "NA",
            "name": "--ignore_filter",
            "rodTypes": "NA",
            "minValue": "NA",
            "options": []
        },
        {
            "required": "yes",
            "summary": "The raw input variants to be recalibrated",
            "synonyms": "-input",
            "maxValue": "NA",
            "fulltext": "These calls should be unfiltered and annotated with the error covariates that are intended to use for modeling.",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "required_in",
            "type": "List[RodBinding[VariantContext]]",
            "minRecValue": "NA",
            "name": "--input",
            "rodTypes": "<a href=htsjdk_variant_bcf2_BCF2Codec.php>BCF2</a>, <a href=htsjdk_variant_vcf_VCFCodec.php>VCF</a>, <a href=htsjdk_variant_vcf_VCF3Codec.php>VCF3</a>",
            "minValue": "NA",
            "options": []
        },
        {
            "required": "no",
            "summary": "The VQSLOD score below which to start filtering",
            "synonyms": "-lodCutoff",
            "maxValue": "NA",
            "fulltext": "",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "advanced_param",
            "type": "Double",
            "minRecValue": "NA",
            "name": "--lodCutoff",
            "rodTypes": "NA",
            "minValue": "NA",
            "options": []
        },
        {
            "required": "no",
            "summary": "Recalibration mode to employ: 1.) SNP for recalibrating only SNPs (emitting indels untouched in the output VCF); 2.) INDEL for indels; and 3.) BOTH for recalibrating both SNPs and indels simultaneously.",
            "synonyms": "-mode",
            "maxValue": "NA",
            "fulltext": "",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "optional_param",
            "type": "Mode",
            "minRecValue": "NA",
            "name": "--mode",
            "rodTypes": "NA",
            "minValue": "NA",
            "options": [
                {
                    "name": "SNP",
                    "summary": ""
                },
                {
                    "name": "INDEL",
                    "summary": ""
                },
                {
                    "name": "BOTH",
                    "summary": ""
                }
            ]
        },
        {
            "required": "no",
            "summary": "The output filtered and recalibrated VCF file in which each variant is annotated with its VQSLOD value",
            "synonyms": "-o",
            "maxValue": "NA",
            "fulltext": "",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "optional_out",
            "type": "VariantContextWriter",
            "minRecValue": "NA",
            "name": "--out",
            "rodTypes": "NA",
            "minValue": "NA",
            "options": []
        },
        {
            "required": "yes",
            "summary": "The input recal file used by ApplyRecalibration",
            "synonyms": "-recalFile",
            "maxValue": "NA",
            "fulltext": "",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "required_in",
            "type": "RodBinding[VariantContext]",
            "minRecValue": "NA",
            "name": "--recal_file",
            "rodTypes": "<a href=htsjdk_variant_bcf2_BCF2Codec.php>BCF2</a>, <a href=htsjdk_variant_vcf_VCFCodec.php>VCF</a>, <a href=htsjdk_variant_vcf_VCF3Codec.php>VCF3</a>",
            "minValue": "NA",
            "options": []
        },
        {
            "required": "no",
            "summary": "The input tranches file describing where to cut the data",
            "synonyms": "-tranchesFile",
            "maxValue": "NA",
            "fulltext": "",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "optional_in",
            "type": "File",
            "minRecValue": "NA",
            "name": "--tranches_file",
            "rodTypes": "NA",
            "minValue": "NA",
            "options": []
        },
        {
            "required": "no",
            "summary": "The truth sensitivity level at which to start filtering",
            "synonyms": "-ts_filter_level",
            "maxValue": "NA",
            "fulltext": "",
            "maxRecValue": "NA",
            "defaultValue": "NA",
            "kind": "optional_param",
            "type": "Double",
            "minRecValue": "NA",
            "name": "--ts_filter_level",
            "rodTypes": "NA",
            "minValue": "NA",
            "options": []
        }
    ],
    "readfilters": [
        {
            "filename": "org_broadinstitute_gatk_engine_filters_MalformedReadFilter.php",
            "name": "MalformedReadFilter"
        },
        {
            "filename": "org_broadinstitute_gatk_engine_filters_BadCigarFilter.php",
            "name": "BadCigarFilter"
        },
        {
            "filename": "org_broadinstitute_gatk_engine_filters_UnmappedReadFilter.php",
            "name": "UnmappedReadFilter"
        },
        {
            "filename": "org_broadinstitute_gatk_engine_filters_NotPrimaryAlignmentFilter.php",
            "name": "NotPrimaryAlignmentFilter"
        },
        {
            "filename": "org_broadinstitute_gatk_engine_filters_FailsVendorQualityCheckFilter.php",
            "name": "FailsVendorQualityCheckFilter"
        },
        {
            "filename": "org_broadinstitute_gatk_engine_filters_DuplicateReadFilter.php",
            "name": "DuplicateReadFilter"
        }
    ],
    "activeregion": {},
    "partitiontype": "LOCUS"
}